<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finalproject.soscanner.mapper.BoardMapper">

	<resultMap id="boardMap" type="BoardVO">
		<result column="BOARDNO" property="boardNo" />
		<result column="TITLE" property="title" />
		<result column="CONTENT" property="content" />
		<result column="WRITER" property="writer" />
		<result column="REGDATE" property="regDate" />
		<result column="VIEWCOUNT" property="viewCount" />
	</resultMap>

	<select id="selectBoard" parameterType="PageVO" resultMap="boardMap">
		  select X.*
		    from (
		  		select ROWNUM as RNUM, A.*
		    	from (
		    		select BOARDNO, TITLE, WRITER, REGDATE, VIEWCOUNT
		    		from KOR_BOARD
		   			order by REGDATE desc) A
		   	<![CDATA[
		   	where ROWNUM <= #{end}) X
		   	]]>
		 where X.RNUM >= #{begin} 

<!-- 		select * -->
<!-- 		  from ( -->
<!-- 		  	select ROWNUM as RNUM, BOARDNO,TITLE,WRITER,REGDATE,VIEWCOUNT from KOR_BOARD -->
<!-- 		  	) -->
<!-- 		  where RNUM between #{begin} and #{pageCount} -->
<!-- 		  order by BOARDNO desc -->
	</select>
	
	<select id="selectBoradPage" parameterType="PageVO" resultType="int">
		select count(*)
		  from KOR_BOARD
	</select>
	
	<select id="detailBoard" parameterType="int" resultMap="boardMap">
		select *
		  from KOR_BOARD
		 where BOARDNO = #{boardNo}
	</select>
	
	<delete id="deleteBoard" parameterType="int" >
		delete
		  from KOR_BOARD
		 where BOARDNO = #{boardNo}
	</delete>
	
	<insert id="insertBoard" parameterType="BoardVO">
		insert into KOR_BOARD(
			BOARDNO, TITLE, WRITER, CONTENT
		) values (
			KOR_BOARD_SEQ.NEXTVAL, #{title}, #{writer}, #{content}
		)
	</insert>
	
	<update id="updateBoard" parameterType="BoardVO">
		update KOR_BOARD
		   set TITLE = #{title},
		       CONTENT = #{content}
		 where BOARDNO = #{boardNo}
	</update>


	<resultMap id="faqMap" type="FaqVO">
		<result column="FAQNO" property="faqNo" />
		<result column="CONTENT" property="content" />
		<result column="ANSWER" property="answer" />
	</resultMap>
	
	<select id="selectFaq" parameterType="PageVO" resultMap="faqMap">
		select *
		  from (
		  	select ROWNUM as RNUM, FAQNO,CONTENT,ANSWER from FAQ
		  	)
		  where RNUM between #{begin} and #{pageCount}
		  order by FAQNO desc
	</select>
	
	<select id="selectPage" parameterType="PageVO" resultType="int">
		select count(*)
		  from FAQ
	</select>
</mapper>